"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var order_constants_1=require("../../../constants/order.constants"),busy_helper_1=require("../../../helpers/busy.helper"),monitor_order_row_object_1=require("../../../objects/monitor/monitor.order.row.object"),MonitorBaseTabComponent=function(){function MonitorBaseTabComponent(monitorService){var _this=this;this.monitorService=monitorService,this.isInitRowInProgress={},this.isStartRowInProgress={},this.isReadyRowInProgress={},this.isQuickBtnOpen={},this.onRowStart=function(monitorOrderRow){return _this.monitorService.monitorOrderRowStart(monitorOrderRow)},this.onRowReady=function(monitorOrderRow){return _this.monitorService.monitorOrderRowReady(monitorOrderRow)},this.cgBusyOrders=busy_helper_1.BusyHelper.GetDefaultBusy("LOADING_ORDERS")}return MonitorBaseTabComponent.prototype.quickActionOnRow=function(orderRow,order,newStatusDesc){switch(newStatusDesc){case order_constants_1.OrderConstants.STATUS_NEW.description:this.initRow(orderRow,order);break;case order_constants_1.OrderConstants.STATUS_IN_PROGRESS.description:this.startRow(orderRow,order);break;case order_constants_1.OrderConstants.STATUS_READY.description:this.readyRow(orderRow,order)}},MonitorBaseTabComponent.prototype.initRow=function(orderRow,order){var _this=this;orderRow&&order&&(this.isInitRowInProgress[orderRow.orderId+"-"+orderRow.rowNumber]=!0,this.monitorService.updateOrderRowStatus(orderRow,order_constants_1.OrderConstants.STATUS_NEW).then(function(result){_this.isInitRowInProgress[orderRow.orderId+"-"+orderRow.rowNumber]=!1,result&&(orderRow.status=order_constants_1.OrderConstants.STATUS_NEW)}),order.status===order_constants_1.OrderConstants.STATUS_READY&&this.monitorService.updateOrderStatus(order,order_constants_1.OrderConstants.STATUS_IN_PROGRESS).then(function(result){result&&(order.status=order_constants_1.OrderConstants.STATUS_IN_PROGRESS)}))},MonitorBaseTabComponent.prototype.startRow=function(orderRow,order){var _this=this,monitorOrderRow=new monitor_order_row_object_1.MonitorOrderRowObject(order,orderRow);this.isStartRowInProgress[orderRow.orderId+"-"+orderRow.rowNumber]=!0,this.onRowStart(monitorOrderRow).then(function(){_this.isStartRowInProgress[orderRow.orderId+"-"+orderRow.rowNumber]=!1})},MonitorBaseTabComponent.prototype.readyRow=function(orderRow,order){var _this=this,monitorOrderRow=new monitor_order_row_object_1.MonitorOrderRowObject(order,orderRow);this.isReadyRowInProgress[orderRow.orderId+"-"+orderRow.rowNumber]=!0,this.onRowReady(monitorOrderRow).then(function(){_this.isReadyRowInProgress[orderRow.orderId+"-"+orderRow.rowNumber]=!1})},MonitorBaseTabComponent}();exports.MonitorBaseTabComponent=MonitorBaseTabComponent;