"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ChatBoxComponent=function(){function ChatBoxComponent(authenticationService,chatService){this.authenticationService=authenticationService,this.chatService=chatService,this.getChatRoomsFromServer();var currUser=this.authenticationService.user;this._source={id:currUser.id,name:currUser.username}}return Object.defineProperty(ChatBoxComponent.prototype,"currUser",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(ChatBoxComponent.prototype,"isChatOpened",{get:function(){return this._isChatOpened},enumerable:!0,configurable:!0}),ChatBoxComponent.prototype.getChatRoomsFromServer=function(){var _this=this;this.chatService.getChatRooms().then(function(data){data&&(_this.chatRooms=data)})},Object.defineProperty(ChatBoxComponent.prototype,"handler",{get:function(){return this._handler},enumerable:!0,configurable:!0}),ChatBoxComponent.prototype.registerChatRoomsHandler=function(handler){return this._handler||(this._handler=handler),!1},ChatBoxComponent.prototype.toggleVisibility=function(){this._isChatOpened=!this._isChatOpened,this.onVisibilityStateChange(this._isChatOpened)},ChatBoxComponent.prototype.sendMessage=function(){this._handler&&this.inputMsg&&this.inputMsg.length>0&&this._handler.sendMessage(this._source,this.inputMsg)},ChatBoxComponent.prototype.onChatInput=function($event){13===($event.which||$event.keyCode)&&(this.sendMessage(),this.inputMsg="",$event.preventDefault())},ChatBoxComponent.prototype.onVisibilityStateChange=function(newState){this._handler&&this._handler.onVisibilityStateChange(newState)},ChatBoxComponent}();exports.chatBoxComponent={controller:ChatBoxComponent,controllerAs:"vm",templateUrl:"app/templates/chat/chat.box.template.html"};