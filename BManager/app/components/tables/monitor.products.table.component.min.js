"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var monitor_order_row_group_object_1=require("../../objects/monitor/monitor.order.row.group.object"),monitor_service_1=require("../../services/monitor.service"),state_table_component_1=require("./state.table.component"),MonitorProductsTableComponent=function(_super){function MonitorProductsTableComponent($scope){var _this=_super.call(this)||this;return _this.$scope=$scope,_this.isCollapsed={},_this.isStartRowInProgress={},_this.isReadyRowInProgress={},_this}return __extends(MonitorProductsTableComponent,_super),MonitorProductsTableComponent.prototype.onRowClickImpl=function(key){this.toggleColapse(key)},MonitorProductsTableComponent.prototype.onRowStartImpl=function(monitorOrderRow){var _this=this;this.onRowStart&&(this.isStartRowInProgress[monitorOrderRow.orderRow.orderId+"-"+monitorOrderRow.orderRow.rowNumber]=!0,this.onRowStart()(monitorOrderRow).then(function(){_this.isStartRowInProgress[monitorOrderRow.orderRow.orderId+"-"+monitorOrderRow.orderRow.rowNumber]=!1}))},MonitorProductsTableComponent.prototype.onRowReadyImpl=function(monitorOrderRow){var _this=this;this.onRowReady&&(this.isReadyRowInProgress[monitorOrderRow.orderRow.orderId+"-"+monitorOrderRow.orderRow.rowNumber]=!0,this.onRowReady()(monitorOrderRow).then(function(){_this.isReadyRowInProgress[monitorOrderRow.orderRow.orderId+"-"+monitorOrderRow.orderRow.rowNumber]=!1}))},MonitorProductsTableComponent.prototype.deleteRow=function(key){var _this=this;this.onDeleteAction&&(this.isDeleteInProcess[key]=!0,this.onDeleteAction()(key).then(function(){_this.isDeleteInProcess[key]=!1}))},MonitorProductsTableComponent.prototype.sumAmount=function(items){return monitor_order_row_group_object_1.MonitorOrderRowGroupObject.SumAmount(items)},MonitorProductsTableComponent.prototype.toggleColapse=function(key){this.isCollapsed[key]=!this.isCollapsed[key]},MonitorProductsTableComponent.prototype.$onInit=function(){var _this=this;this.$scope.$watch(function(){return _this.data},function(newValue,oldValue){_this.monitorOrderRows=monitor_service_1.MonitorService.OrdersToMonitorRows(_this.data)})},MonitorProductsTableComponent.prototype.$onDestroy=function(){},MonitorProductsTableComponent}(state_table_component_1.StateTableComponent),MonitorProductsTableComponentOptions=function(_super){function MonitorProductsTableComponentOptions(){var _this=_super.call(this,MonitorProductsTableComponent,"app/templates/tables/monitor.products.table.template.html")||this;return _this.bindings.isCollapsible="<",_this.bindings.onRowStart="&?",_this.bindings.onRowReady="&?",_this.bindings.hideProducts="<",_this}return __extends(MonitorProductsTableComponentOptions,_super),MonitorProductsTableComponentOptions}(state_table_component_1.StateTableComponentOptions);exports.monitorProductsTableComponent=new MonitorProductsTableComponentOptions;