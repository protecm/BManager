"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var product_object_1=require("../../../objects/product/product.object"),db_messages_constants_1=require("../../../constants/db.messages.constants"),alert_helper_1=require("../../../helpers/alert.helper"),product_base_modal_component_1=require("./product.base.modal.component"),ProductAddModalComponent=function(_super){function ProductAddModalComponent($uibModalInstance,modalService,categoryService,toastService,productService,$translate,product){var _this=_super.call(this,$uibModalInstance,modalService,categoryService,toastService,product)||this;return _this.productService=productService,_this.$translate=$translate,_this.title=_this.$translate.instant("ADD_PRODUCT"),_this.id=_this.$translate.instant("NEW"),_this}return __extends(ProductAddModalComponent,_super),ProductAddModalComponent.prototype.save=function(valid){var _this=this;if(this.alertHelper.clear(),valid){this.isSaveInProcess=!0;var product_1=new product_object_1.ProductObject(null,this.selectedCategory,this.name,this.isDeleted);this.productService.addProduct(product_1).then(function(dbMsg){if(_this.isSaveInProcess=!1,dbMsg.code===db_messages_constants_1.DbMessagesConstants.CODE_OK)product_1.id=dbMsg.data,_this.$uibModalInstance.close(product_1);else if(dbMsg.code===db_messages_constants_1.DbMessagesConstants.CODE_MYSQL_DUPLICATE_KEY){var msg=_this.$translate.instant("KEY_ALREADY_EXISTS_IN_SYSTEM");_this.alertHelper.addAlert(alert_helper_1.AlertHelper.TYPE_DANGER,msg)}})}},ProductAddModalComponent}(product_base_modal_component_1.ProductBaseModalComponent),productAddModalComponent=function(_super){function productAddModalComponent(product){void 0===product&&(product=null);var _this=_super.call(this,product)||this;return _this.controller=ProductAddModalComponent,_this}return __extends(productAddModalComponent,_super),productAddModalComponent}(product_base_modal_component_1.ProductBaseModalSettings);exports.productAddModalComponent=productAddModalComponent;