"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var user_base_modal_component_1=require("./user.base.modal.component"),user_object_1=require("../../../objects/user/user.object"),db_messages_constants_1=require("../../../constants/db.messages.constants"),user_access_object_1=require("../../../objects/user/user.access.object"),UserAddModalComponent=function(_super){function UserAddModalComponent($uibModalInstance,usersService,$translate,user){var _this=_super.call(this,$uibModalInstance,user)||this;return _this.usersService=usersService,_this.$translate=$translate,_this.isEditMode=!1,_this.isEditPassword=!0,_this.title=_this.$translate.instant("ADD_USER"),_this.id=_this.$translate.instant("NEW"),_this}return __extends(UserAddModalComponent,_super),UserAddModalComponent.prototype.save=function(valid){var _this=this;if(this.alertHelper.clear(),valid){this.isSaveInProcess=!0;var newUserAccess=new user_access_object_1.UserAccessObject(this.userAccess.accessHome,this.userAccess.accessProducts,this.userAccess.accessCustomers,this.userAccess.accessOrders,this.userAccess.accessMonitor,this.userAccess.accessDeliveries,this.userAccess.accessReports,this.userAccess.accessSystem),newUser_1=new user_object_1.UserObject(null,this.username,this.password,newUserAccess,this.isDeleted);this.usersService.addUser(newUser_1).then(function(dbMsg){_this.isSaveInProcess=!1,dbMsg.code===db_messages_constants_1.DbMessagesConstants.CODE_OK&&(newUser_1=new user_object_1.UserObject(dbMsg.data,newUser_1.username,"",newUser_1.userAccess,newUser_1.isDeleted),_this.$uibModalInstance.close(newUser_1))})}},UserAddModalComponent}(user_base_modal_component_1.UserBaseModalComponent),userAddModalComponent=function(_super){function userAddModalComponent(user){void 0===user&&(user=null);var _this=_super.call(this,user)||this;return _this.controller=UserAddModalComponent,_this}return __extends(userAddModalComponent,_super),userAddModalComponent}(user_base_modal_component_1.UserBaseModalSettings);exports.userAddModalComponent=userAddModalComponent;