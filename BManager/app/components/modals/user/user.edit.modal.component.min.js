"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var user_base_modal_component_1=require("./user.base.modal.component"),user_object_1=require("../../../objects/user/user.object"),db_messages_constants_1=require("../../../constants/db.messages.constants"),user_access_object_1=require("../../../objects/user/user.access.object"),UserEditModalComponent=function(_super){function UserEditModalComponent($uibModalInstance,usersService,$translate,user){var _this=_super.call(this,$uibModalInstance,user)||this;return _this.usersService=usersService,_this.$translate=$translate,_this.isEditMode=!0,_this.isEditPassword=!1,_this.title=_this.$translate.instant("EDIT_USER"),_this}return __extends(UserEditModalComponent,_super),UserEditModalComponent.prototype.save=function(valid){var _this=this;if(this.alertHelper.clear(),valid){this.isSaveInProcess=!0;var editedUserAccess=new user_access_object_1.UserAccessObject(this.userAccess.accessHome,this.userAccess.accessProducts,this.userAccess.accessCustomers,this.userAccess.accessOrders,this.userAccess.accessMonitor,this.userAccess.accessDeliveries,this.userAccess.accessReports,this.userAccess.accessSystem),password=this.isEditPassword?this.password:"",editedUser_1=new user_object_1.UserObject(this.id,this.username,password,editedUserAccess,this.isDeleted);this.usersService.editUser(this.user,editedUser_1).then(function(dbMsg){_this.isSaveInProcess=!1,dbMsg.code===db_messages_constants_1.DbMessagesConstants.CODE_OK&&(editedUser_1=new user_object_1.UserObject(editedUser_1.id,editedUser_1.username,"",editedUser_1.userAccess,editedUser_1.isDeleted),_this.$uibModalInstance.close(editedUser_1))})}},UserEditModalComponent}(user_base_modal_component_1.UserBaseModalComponent),userEditModalComponent=function(_super){function userEditModalComponent(user){var _this=_super.call(this,user)||this;return _this.controller=UserEditModalComponent,_this}return __extends(userEditModalComponent,_super),userEditModalComponent}(user_base_modal_component_1.UserBaseModalSettings);exports.userEditModalComponent=userEditModalComponent;