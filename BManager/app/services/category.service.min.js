"use strict";var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}();Object.defineProperty(exports,"__esModule",{value:!0});var category_object_1=require("../objects/category.object"),communication_constants_1=require("../constants/communication.constants"),request_object_1=require("../objects/request.object"),edit_ticket_object_1=require("../objects/edit.ticket.object"),callback_service_interface_1=require("../interfaces/callback.service.interface"),CategoryService=function(_super){function CategoryService(communicationService,$interval){var _this=_super.call(this,$interval)||this;return _this.communicationService=communicationService,_this}return __extends(CategoryService,_super),CategoryService.prototype.addCategory=function(category){return this.communicationService.sendRequest(communication_constants_1.CommunicationConstants.ADD_CATEGORY,category).then(function(srvMsg){return srvMsg.dbMsg})},CategoryService.prototype.deleteCategory=function(category){return this.communicationService.sendRequest(communication_constants_1.CommunicationConstants.DEL_CATEGORY,category).then(function(srvMsg){return srvMsg.dbMsg})},CategoryService.prototype.editCategory=function(orgCategory,edtCategory){var ticket=new edit_ticket_object_1.EditTicketObject(orgCategory,edtCategory);return this.communicationService.sendRequest(communication_constants_1.CommunicationConstants.EDIT_CATEGORY,ticket).then(function(srvMsg){return srvMsg.dbMsg})},CategoryService.prototype.getCategories=function(){var _this=this,reqObj=new request_object_1.RequestObject("CategoryService:getCategories");return this.communicationService.sendRequest(communication_constants_1.CommunicationConstants.GET_CATEGORIES,reqObj).then(function(srvMsg){return _this.deserializeArray(srvMsg.dbMsg)})},CategoryService.prototype.convert=function(serverCategory){return serverCategory?new category_object_1.CategoryObject(serverCategory.id,serverCategory.name,serverCategory.isDeleted).deserialize():null},CategoryService.prototype.deserialize=function(dbMsg){return this.convert(dbMsg.data)},CategoryService.prototype.deserializeArray=function(dbMsg){var serverData=dbMsg.data,categories=[];if(serverData)for(var len=serverData.length,i=0;i<len;i++){var serverCategory=serverData[i],clientCategory=this.convert(serverCategory);categories.push(clientCategory)}return categories},CategoryService}(callback_service_interface_1.CallbackService);exports.CategoryService=CategoryService;