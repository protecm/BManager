"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var statistics_object_1=require("../objects/statistics.object"),communication_constants_1=require("../constants/communication.constants"),date_helper_1=require("../helpers/date.helper"),order_filter_object_1=require("../objects/order/order.filter.object"),StatisticsService=function(){function StatisticsService(communicationService,confService){this.communicationService=communicationService,this.confService=confService,this.cacheData={}}return StatisticsService.prototype.getStatistics=function(){var _this=this,hoursInterval=this.confService.configurationData.monitorActiveOrderHours,toDate=date_helper_1.DateHelper.GetTodayDate(hoursInterval);return this.communicationService.sendRequest(communication_constants_1.CommunicationConstants.GET_STATISTICS,order_filter_object_1.OrderFilterObject.GetStatisticsFilter(toDate)).then(function(srvMsg){return _this.timestamp=Date.now(),_this.cacheData.statistics=_this.deserialize(srvMsg.dbMsg),_this.cacheData.statistics})},Object.defineProperty(StatisticsService.prototype,"cachedStatistics",{get:function(){return this.cacheData.statistics},enumerable:!0,configurable:!0}),StatisticsService.prototype.convert=function(statisticsDto){return statisticsDto?new statistics_object_1.StatisticsObject(statisticsDto.general,statisticsDto.onDelay).deserialize():null},StatisticsService.prototype.deserialize=function(dbMsg){return this.convert(dbMsg.data)},StatisticsService.prototype.deserializeArray=function(dbMsg){return[]},StatisticsService}();exports.StatisticsService=StatisticsService;