"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var chat_poll_response_object_1=require("../objects/chat/chat.poll.response.object"),communication_constants_1=require("../constants/communication.constants"),ChatPollService=function(){function ChatPollService(communicationService){this.communicationService=communicationService}return ChatPollService.prototype.longPoll=function(chatPollReqGroup){var _this=this;return this.communicationService.sendRequest(communication_constants_1.CommunicationConstants.POLL_CHAT,chatPollReqGroup).then(function(srvMsg){return _this.deserializeMultiple(srvMsg.dbMsg)})},ChatPollService.prototype.convert=function(serverPollResponse){return serverPollResponse?new chat_poll_response_object_1.ChatPollResponseObject(serverPollResponse.department,serverPollResponse.msgs):null},ChatPollService.prototype.deserialize=function(dbMsg){return this.convert(dbMsg.data)},ChatPollService.prototype.deserializeArray=function(dbMsg){var serverData=dbMsg&&dbMsg.data,pollResponseArr=[];if(serverData)for(var len=serverData.length,i=0;i<len;i++){var serverPollResponse=serverData[i],clientPollResponse=this.convert(serverPollResponse);pollResponseArr.push(clientPollResponse)}return pollResponseArr},ChatPollService.prototype.deserializeMultiple=function(dbMsg){var serverData=dbMsg&&dbMsg.data,roomUpdates=[];if(serverData)for(var len=serverData.length,i=0;i<len;i++){var serverDbMsg=serverData[i],clientPollResponse=this.deserialize(serverDbMsg);roomUpdates.push(clientPollResponse)}return roomUpdates},ChatPollService}();exports.ChatPollService=ChatPollService;