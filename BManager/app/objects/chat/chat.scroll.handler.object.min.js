"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var ChatScrollHandlerObject=function(){function ChatScrollHandlerObject($timeout,target){this.$timeout=$timeout,this.target=target,this.lastScrollPos=0,this.setHandlers()}return ChatScrollHandlerObject.prototype.scrollToBottom=function(){var scrollBottomEvent=new Event("scroll-to-bottom",{bubbles:!1,cancelable:!1});this.target&&this.target.dispatchEvent(scrollBottomEvent)},ChatScrollHandlerObject.prototype.scrollToBottomHandler=function($event){var _this=this;this.scrollToBottomPromise=this.$timeout(function(){var target=$event.target;target.scrollTop=target.scrollHeight-target.offsetHeight,_this.lastScrollPos=target.scrollTop})},ChatScrollHandlerObject.prototype.onChatConversationScroll=function($event){var _this=this;this.scrollToBottomPromise.then(function(){var target=$event.target,scrollPos=target.scrollTop;scrollPos>=_this.lastScrollPos?_this.onChatConversationScrollDown(target,scrollPos):_this.onChatConversationScrollUp(target,scrollPos),_this.lastScrollPos=scrollPos})},ChatScrollHandlerObject.prototype.setHandlers=function(){this.target&&(this.target.addEventListener("scroll",this.onChatConversationScroll.bind(this)),this.target.addEventListener("scroll-to-bottom",this.scrollToBottomHandler.bind(this)))},ChatScrollHandlerObject.prototype.destroyHandlers=function(){this.target&&(this.target.removeEventListener("scroll",this.onChatConversationScroll),this.target.removeEventListener("scroll-to-bottom",this.scrollToBottomHandler))},ChatScrollHandlerObject.prototype.onChatConversationScrollUp=function(target,scrollPos){0===scrollPos&&this.onChatConversationScrollTop()},ChatScrollHandlerObject.prototype.onChatConversationScrollDown=function(target,scrollPos){target.scrollHeight-target.offsetHeight-1<=scrollPos&&this.onChatConversationScrollBottom()},ChatScrollHandlerObject.prototype.onChatConversationScrollTop=function(){},ChatScrollHandlerObject.prototype.onChatConversationScrollBottom=function(){},ChatScrollHandlerObject.prototype.onDestroy=function(){this.destroyHandlers()},ChatScrollHandlerObject}();exports.ChatScrollHandlerObject=ChatScrollHandlerObject;