"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var order_constants_1=require("../constants/order.constants"),StatisticsObject=function(){function StatisticsObject(general,onDelay){this.fixedGeneral=[],this.fixedOnDelay=[],this.general=general,this.onDelay=onDelay}return Object.defineProperty(StatisticsObject.prototype,"countMonitor",{get:function(){var count=0;return this.generalMonitorValues.forEach(function(obj,ind,arr){count+=obj}),count},enumerable:!0,configurable:!0}),Object.defineProperty(StatisticsObject.prototype,"countDeliveries",{get:function(){var count=0;return this.generalDeliveriesValues.forEach(function(obj,ind,arr){count+=obj}),count},enumerable:!0,configurable:!0}),Object.defineProperty(StatisticsObject.prototype,"generalMonitorValues",{get:function(){return this.getGeneralMonitorImpl("count")},enumerable:!0,configurable:!0}),Object.defineProperty(StatisticsObject.prototype,"generalMonitorLabels",{get:function(){return this.getGeneralMonitorImpl("status","description")},enumerable:!0,configurable:!0}),Object.defineProperty(StatisticsObject.prototype,"generalMonitorColors",{get:function(){return this.getGeneralMonitorImpl("status","backgroundColor")},enumerable:!0,configurable:!0}),StatisticsObject.prototype.getGeneralMonitorImpl=function(key,subKey){for(var data=[],i=0;i<this.fixedGeneral.length&&!(this.fixedGeneral[i].status.code>=order_constants_1.OrderConstants.STATUS_DELIVERIES.code);i++)subKey?data.push(this.fixedGeneral[i][key][subKey]):data.push(this.fixedGeneral[i][key]);return data},Object.defineProperty(StatisticsObject.prototype,"generalDeliveriesValues",{get:function(){return this.getGeneralDeliveriesImpl("count")},enumerable:!0,configurable:!0}),Object.defineProperty(StatisticsObject.prototype,"generalDeliveriesLabels",{get:function(){return this.getGeneralDeliveriesImpl("status","description")},enumerable:!0,configurable:!0}),Object.defineProperty(StatisticsObject.prototype,"generalDeliveriesColors",{get:function(){return this.getGeneralDeliveriesImpl("status","backgroundColor")},enumerable:!0,configurable:!0}),StatisticsObject.prototype.getGeneralDeliveriesImpl=function(key,subKey){for(var data=[],i=0;i<this.fixedGeneral.length&&!(this.fixedGeneral[i].status.code>=order_constants_1.OrderConstants.STATUS_DELIVERIES.code);)i++;for(;i<this.fixedGeneral.length&&!(this.fixedGeneral[i].status.code>order_constants_1.OrderConstants.STATUS_SUPPLIED.code);)subKey?data.push(this.fixedGeneral[i][key][subKey]):data.push(this.fixedGeneral[i][key]),i++;return data},Object.defineProperty(StatisticsObject.prototype,"generalMonitorOnDelayValues",{get:function(){for(var data=[],i=0;i<this.fixedOnDelay.length&&!(this.fixedOnDelay[i].status.code>=order_constants_1.OrderConstants.STATUS_DELIVERIES.code);i++)data.push(this.fixedOnDelay[i].count);return data},enumerable:!0,configurable:!0}),StatisticsObject.prototype.mergeStatisticsData=function(){this.mergeStatisticsDataImpl(this.general,this.fixedGeneral),this.mergeStatisticsDataImpl(this.onDelay,this.fixedOnDelay)},StatisticsObject.prototype.mergeStatisticsDataImpl=function(sourceArr,targetArr){for(var statusList=order_constants_1.OrderConstants.STATUS_LIST,listCount=statusList.length,_loop_1=function(i){var count=0,status_1=statusList[i];sourceArr.forEach(function(obj,ind,arr){if(obj.status===status_1)return count=obj.count,!1}),targetArr.push({status:status_1,count:count})},i=0;i<listCount;i++)_loop_1(i)},StatisticsObject.prototype.serialize=function(base64){var dataStr=JSON.stringify(this);return base64.encode(dataStr)},StatisticsObject.prototype.deserialize=function(){for(var len=this.general.length,i=0;i<len;i++){var generalStatus=this.general[i],statusCode=parseInt(generalStatus.status.toString());generalStatus.status=order_constants_1.OrderConstants.GetStatus(statusCode),generalStatus.count=parseInt(generalStatus.count.toString())}len=this.onDelay.length;for(i=0;i<len;i++){var onDelayStatus=this.onDelay[i];statusCode=parseInt(onDelayStatus.status.toString());onDelayStatus.status=order_constants_1.OrderConstants.GetStatus(statusCode),onDelayStatus.count=parseInt(onDelayStatus.count.toString())}return this.mergeStatisticsData(),this},StatisticsObject}();exports.StatisticsObject=StatisticsObject;